<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>IP Calculator</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="css/style.css" rel="stylesheet">


    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 16px;
        }

        .addr {
            width: 30px;
        }

        .result {
            border-top: 1px solid rgb(117, 117, 117);
            border-bottom: 1px solid rgb(117, 117, 117);
            border-right: 2px solid rgb(117, 117, 117);
            border-left: 2px solid rgb(117, 117, 117);
        }

        .result .label {
            display: inline-block;
            width: 200px;
            background: rgb(117, 117, 117);
        }

        .label {
            color: #ffffff;
        }

        .button {
            background-color: rgb(68, 92, 228);
            /* Green */
            border: none;
            color: white;
            padding: 4.4px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }
    </style>
</head>


<body>

    <!-- Main navigation -->
    <header>
        <!--Navbar -->
        <nav class="mb-1 navbar navbar-expand-sm navbar-dark primary-color mb-5">
            <a class="navbar-brand" href="index.html">IPAM</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent-333" aria-controls="navbarSupportedContent-333"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent-333">

                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Dashboard
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <!-- Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Network</a>
                    <div class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="ipam.html">IP Manager</a>
                        <a class="dropdown-item" href="hostam.html">Hostname Manager</a>
                        <a class="dropdown-item" href="ipblock.html">Add IP Block</a>
                    </div>
                </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="ipam.html">IP Manager</a>
                    </li> -->
                    <li class="nav-item">
                        <a class="nav-link" href="ipcalc.html">IP Calculator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="administrator.html">Administrator</a>
                    </li>
                </ul>

                <ul class="navbar-nav ml-auto nav-flex-icons">
                    <!-- Search form -->
                    <li class="form-inline invisible">
                        <input class="form-control" type="text" placeholder="Search" aria-label="Search">
                    </li>
                    <li class="nav-item invisible">
                        <a class="nav-link waves-effect waves-light">
                            <i class="fas fa-search"></i>
                        </a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user"></i>
                        </a>

                        <div class="dropdown-menu dropdown-menu-right dropdown-primary"
                            aria-labelledby="navbarDropdownMenuLink-333">
                            <h6 class="dropdown-header">Logged in as Admin</h6>
                            <!--              <a class="dropdown-item disabled" href="#">Admin Page</a>-->
                            <a class="dropdown-item" href="profile.html">Profile</a>
                            <a class="dropdown-item" href="#">Log Out</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <!--/.Navbar -->
    </header>


    <!-- Main navigation -->
    <div class="container">
        <h1> IP Address Calculator</h1>
        IP Address :
        <input type='text' class='addr' id='q1'> .
        <input type='text' class='addr' id='q2'> .
        <input type='text' class='addr' id='q3'> .
        <input type='text' class='addr' id='q4'> /
        <input type='text' class='addr' id='cidr'>
        <button class="button" data-toggle="modal"
        data-target="#modalConfirmpush" onclick='calculate();'>Calculate</button>

<!--Modal: modalConfirmDelete-->
<div class="modal fade" id="modalConfirmpush" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-sm modal-notify modal-success" role="document">
    <!--Content-->
    <div class="modal-content text-center">
      <!--Header-->
      <div class="modal-header d-flex justify-content-center">
        <p class="heading">Are you sure?</p>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="white-text">&times;</span>
        </button>
      </div>

      <!--Body-->
      <div class="modal-body">
        
          <i class="fas fa-check fa-4x mb-3 animated rotateIn"></i>
      </div>

      <!--Footer-->
      <div class="modal-footer justify-content-center">
        <a type="button" class="btn btn-success" data-dismiss="modal" data-toggle="modal"
        data-target="#modalConfirmdb">Yes </a>
        <a type="button" class="btn btn-outline-success waves-effect" data-dismiss="modal">No</a>
      </div>
    </div>
    <!--/.Content-->
  </div>
</div>
<!--Modal: modalConfirmDelete-->



<!-- Modal confirm push database -->
<div class="modal fade" id="modalConfirmdb" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">

  <!-- Add .modal-dialog-centered to .modal-dialog to vertically center the modal -->
  <div class="modal-dialog modal-dialog-centered" role="document">


    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          
        </button>
      </div>
      <div class="modal-body">
        Your data has been update
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>
<!-- Modal confirm push database -->

        <hr>
        <div class='result'>
            <span class=label>IP Address :</span>
            <span class=value id=resIP></span>
        </div>

        <div class='result'>
            <span class=label>Subnet mask :</span>
            <span class=value id=resMask></span>
        </div>

        <div class='result'>
            <span class=label>Net Address :</span>
            <span class=value id=resNet></span>
        </div>

        <div class='result'>
            <span class=label>Broadcast Address :</span>
            <span class=value id=resBC></span>
        </div>

        <div class='result'>
            <span class=label>Standard Class :</span>
            <span class=value id=resClass></span>
        </div>

        <div class='result'>
            <span class=label>Range :</span>
            <span class=value id=resRange></span>
        </div>

        <div class='result'>
            <span class=label>IP Binary :</span>
            <span class=value id=resBinIP></span>
        </div>

        <div class='result'>
            <span class=label>Mask Binary :</span>
            <span class=value id=resBinMask></span>
        </div>

        <div class='result'>
            <span class=label>Net Address Binary :</span>
            <span class=value id=resBinNet></span>
        </div>

        <div class='result'>
            <span class=label>BC Address Binary :</span>
            <span class=value id=resBinBC></span>
        </div>
    </div>


    <script type='text/javascript'>
        function calculate() {
            //get values from input box
            var q1 = document.getElementById('q1').value;
            var q2 = document.getElementById('q2').value;
            var q3 = document.getElementById('q3').value;
            var q4 = document.getElementById('q4').value;
            var cidr = document.getElementById('cidr').value;

            //validate input value
            if (
                (q1 >= 0 && q1 <= 255) &&
                (q2 >= 0 && q2 <= 255) &&
                (q3 >= 0 && q3 <= 255) &&
                (q4 >= 0 && q4 <= 255) &&
                (cidr >= 0 && cidr <= 32)
            ) {

                //display IP address
                document.getElementById('resIP').innerHTML = q1 + "." + q2 + "." + q3 + "." + q4;

                //get IP Address binaries
                var ipBin = {};
                ipBin[1] = String("00000000" + parseInt(q1, 10).toString(2)).slice(-8);
                ipBin[2] = String("00000000" + parseInt(q2, 10).toString(2)).slice(-8);
                ipBin[3] = String("00000000" + parseInt(q3, 10).toString(2)).slice(-8);
                ipBin[4] = String("00000000" + parseInt(q4, 10).toString(2)).slice(-8);

                //decide standart class
                var standartClass = "";
                if (q1 <= 126) {
                    standartClass = "A";
                } else if (q1 == 127) {
                    standartClass = "loopback IP"
                } else if (q1 >= 128 && q1 <= 191) {
                    standartClass = "B";
                } else if (q1 >= 192 && q1 <= 223) {
                    standartClass = "C";
                } else if (q1 >= 224 && q1 <= 239) {
                    standartClass = "D (Multicast Address)";
                } else if (q1 >= 240 && q1 <= 225) {
                    standartClass = "E (Experimental)";
                } else {
                    standartClass = "Out of range";
                }

                //netmask
                var mask = cidr;
                var importantBlock = Math.ceil(mask / 8);
                var importantBlockBinary = ipBin[importantBlock];
                var maskBinaryBlockCount = mask % 8;

                if (maskBinaryBlockCount == 0) importantBlock++;
                var maskBinaryBlock = "";
                var maskBlock = "";

                for (var i = 1; i <= 8; i++) {
                    if (maskBinaryBlockCount >= i) {
                        maskBinaryBlock += "1";
                    } else {
                        maskBinaryBlock += "0";
                    }
                }

                //convert binary mask block to decimal
                maskBlock = parseInt(maskBinaryBlock, 2);

                //net & broadcast addr
                var netBlockBinary = "";
                var bcBlockBinary = "";
                for (var i = 1; i <= 8; i++) {
                    if (maskBinaryBlock.substr(i - 1, 1) == "1") {
                        netBlockBinary += importantBlockBinary.substr(i - 1, 1);
                        bcBlockBinary += importantBlockBinary.substr(i - 1, 1);

                    } else {
                        netBlockBinary += "0";
                        bcBlockBinary += "1";
                    }
                }

                //put everything together, create a string container variables
                var mask = "";
                var maskBinary = "";
                var net = "";
                var bc = "";
                var netBinary = "";
                var bcBinary = "";
                var rangeA = "";
                var rangeB = "";

                //loop to put whole strings block together
                for (var i = 1; i <= 4; i++) {
                    if (importantBlock > i) {
                        //blocks before the important block.
                        mask += "255";
                        maskBinary += "11111111";
                        netBinary += ipBin[i];
                        bcBinary += ipBin[i];
                        net += parseInt(ipBin[i], 2);
                        bc += parseInt(ipBin[i], 2);
                        rangeA += parseInt(ipBin[i], 2);
                        rangeB += parseInt(ipBin[i], 2);
                    }
                    else if (importantBlock == i) {
                        //the important block.
                        mask += maskBlock;
                        maskBinary += maskBinaryBlock;
                        netBinary += netBlockBinary;
                        bcBinary += bcBlockBinary;
                        net += parseInt(netBlockBinary, 2);
                        bc += parseInt(bcBlockBinary, 2);
                        rangeA += (parseInt(netBlockBinary, 2) + 1);
                        rangeB += (parseInt(bcBlockBinary, 2) - 1);
                    }
                    else {
                        //block after the important block.
                        mask += 0;
                        maskBinary += "00000000";
                        netBinary += "00000000";
                        bcBinary += "11111111";
                        net += "0";
                        bc += "255";
                        rangeA += 0;
                        rangeB += 255;
                    }

                    //add . separator except the last block
                    if (i < 4) {
                        mask += ".";
                        maskBinary += ".";
                        netBinary += ".";
                        bcBinary += ".";
                        net += ".";
                        bc += ".";
                        rangeA += ".";
                        rangeB += ".";
                    }
                }

                //write the results to the page.
                document.getElementById('resMask').innerHTML = mask;
                document.getElementById('resNet').innerHTML = net;
                document.getElementById('resBC').innerHTML = bc;
                document.getElementById('resRange').innerHTML = rangeA + " - " + rangeB;
                document.getElementById('resBinIP').innerHTML = ipBin[1] + "." + ipBin[2] + "." + ipBin[3] + "." + ipBin[4];
                document.getElementById('resBinMask').innerHTML = maskBinary;
                document.getElementById('resBinNet').innerHTML = netBinary;
                document.getElementById('resBinBC').innerHTML = bcBinary;
                document.getElementById('resClass').innerHTML = standartClass;
            }
            else {
                alert("invalid value");
            }
        }
    </script>

    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
</body>

</html>